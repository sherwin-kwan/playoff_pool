<h1>Edit Your Profile</h1>

<% if @user.id != session[:current_user] %>
  <p>You do not have permission to change this profile.</p>
<% else %>
  <%= form_with model: @user do |form| %>
  <div class="form-group">
  <%= form.label :name, "Full Name" %>
  <%= form.text_field :name, class: "form-control", value: flash[:name] || @user.name %>
  </div>
  <div class="form-group">
  <%= form.label :given_name, "Given Name (will appear in the standings)" %>
  <%= form.text_field :given_name, class: "form-control", value: flash[:given_name] || @user.given_name %>
  </div>
  <div class="form-group">
  <%= form.label :email, "Email" %>
  <%= form.text_field :email, class: "form-control", value: flash[:email] || @user.email %>
  </div>
  <div class="form-group textarea-group">
  <%= form.label :about_text, "About Me" %>
  <%= form.text_area :about_text, class: "form-control", value: flash[:about_text] || @user.about_text %>
  </div>
  <div class="form-group">
  <%= form.label :password, "Password" %>
  <%= form.password_field :password, class: "form-control" %>
  </div>
  <div class="form-group">
  <%= form.label :password, "Retype Password to Confirm" %>
  <%= form.password_field :password_confirmation, class: "form-control" %>
  </div>
  <% if flash[:errors] %>
  <ul class="error">
    <% flash[:errors].each do |message| %>
      <li><%= message %></li>
    <% end %>
  </ul>
  <% end %>
  <%= form.submit "Update Profile", class: "btn btn-primary" %>
  <%= button_to "Back to Profile", user_path(id: @user.id) %>
  <% end %>
<% end %>

